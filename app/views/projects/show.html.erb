<div id="doc-box">
  <div id="doc-overview">
    <h1><%= @project.title %></h1>
    <div style="display: inline-block; font-size: 1.0em; font-style: italic;">
      <div>Status: <strong style="font-style: normal;"><%= @project.status.upcase %></strong></div>
      <div><%= "Created #{time_ago_in_words(@project.created_at)} ago" %> by <%= project_created_by %></div>
    </div>
    <div class="small-divider"></div>
    <p><strong><%= @project.description %></strong></p>
  </div>
  <div id="doc-side-panel">
    <% if user_signed_in? %>
      <ul>
        <li><%= custom_css_btn 'edit', 'fa fa-pencil-square-o', edit_project_path(@project) %></li>
        <li><%= custom_css_btn 'new document', 'fa fa-file-text-o', new_project_document_path(project_id: @project.friendly_id) %></li>
        <li>
          <% if current_user.following?(@project) %>
            <%= custom_css_btn 'leave project', 'fa fa-users', unfollow_project_path(@project) %>
            <li><div id="HOA-placeholder"></div></li>

            <script src="https://apis.google.com/js/platform.js"></script>
            <script>
              gapi.hangout.render('HOA-placeholder', {
                'topic': '<%= @project.title%> - Pairing session',
                'render': 'createhangout',
                'hangout_type': 'onair',
                'initial_apps': [{'app_id' : '463111787485', 'app_type' : 'ROOM_APP' }],
              });
            </script>
          <% else %>
            <%= custom_css_btn 'join project', 'fa fa-users', follow_project_path(@project) %>
          <% end %>
        </li>
      </ul>
    <% end %>
  </div>
</div>

<div class="small-divider"></div>

<ul class="nav nav-tabs">
  <li class="active"><a href="#documents_list" data-toggle="tab">Documents (<%= @documents.count %>)</a></li>
  <li><a href="#members_list" data-toggle="tab">Members List (<%= @members.count %>)</a></li>
</ul>

<!-- Tab panes -->
<div class="tab-content">
  <div class="tab-pane active" id="documents_list">
    <ul class="list-group">
      <% unless @documents.empty? %>
        <h2>Related documents</h2>
        <% @project.documents.roots.each do |d| %>
          <li class="list-group-item"><strong><%= link_to d.title, project_document_path(@project, d) %></strong></li>
        <% end %>
      <% else %>
        <p style="margin-top: 20px;">No documents can be found for project "<%= @project.title %>"</p>
      <% end %>
    </ul>
  </div>
  <div class="tab-pane" id="members_list">
    <ul class="list-group">
      <% if @members.empty? %>
        <p style="margin-top: 20px;">No members in project "<%= @project.title %>"</p>
      <% else %>
        <h2>List of Project Members</h2>
        <% @members.each do |member| %>
          <li class="list-group-item"><strong><%= link_to member.email, users_show_path(member) %></strong></li>
        <% end %>
      <% end %>
    </ul>
  </div>
</div>

